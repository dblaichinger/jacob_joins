%p
  = link_to 'recipe', wizard_path(:recipe)
  = link_to 'user', wizard_path(:user)
  = link_to 'preview', wizard_path(:show_preview)

=cookies[:recipe].inspect
=cookies[:user].inspect

=@recipe.inspect
%h1 New_recipe
- if @user && @recipe
  %h2 Hallo #{@user.name}, du kannst hier dein bestehendes Rezept "#{@recipe.name}" Ã¤ndern!
  %h2 Klicke auf Reset um ein neues Rezept hochzuladen!

%h3
  = link_to "Fill in with fake data", "#", :onclick => "fill_in_recipe(); return false;"


= form_for @recipe do |f|
  = handle_error_messages(@recipe).html_safe if @recipe.errors.any?
  %p
    = f.label :name, "Name"
    = f.text_field :name
  %p
    = f.label :portion, "Anzahl Portionen"
    = f.text_field :portion

  %div#dynamicContainer
    %p.dynamicElement
      = text_field_tag "recipe[ingredients_strings][][quantity]", nil, :id => "recipe_ingredients_strings_quantity"
      = text_field_tag "recipe[ingredients_strings][][ingredient]", nil, :id => "recipe_ingredients_strings_ingredient"

  %p
    = f.label :preparation, "Zubereitung"
    = f.text_area :preparation
  %p
    = f.label :duration, "Zubereitungszeit in Minuten"
    = f.text_field :duration
  %p
    = f.label :country, "Country"
    - if (!defined? @location) || (@location.data['country_name'].empty?)
      = f.text_field :country
    - else
      = f.text_field :country, :value => @location.data['country_name']
      
  %p
    = f.label :city, "City"
    - if (!defined? @location) || (@location.data['city'].empty?)
      = f.text_field :city
    - else
      = f.text_field :city, :value => @location.data['city']

  .hidden
    = f.hidden_field :longitude
    = f.hidden_field :latitude

  %p
    = f.submit "Save"

= button_to "Reset", delete_cookie_upload_index_path, :method => :get, :confirm => "Do you want to upload another recipe?"

= link_to "Skip this step", next_wizard_path


