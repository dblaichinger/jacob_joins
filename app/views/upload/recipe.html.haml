//- content_for(:head) do
:javascript
  $(document).ready(function(){

    $("#ingredients").elementOnDemand();

    $("#new_recipe div div").click(function(){
      $("#new_recipe div div").removeClass("active");
      $(this).addClass("active");
    });
  });

=#cookies[:recipe].inspect
=#cookies[:user].inspect

=#@recipe.inspect
/%h1 New_recipe

- if @user && @recipe
  %h2 Hallo #{@user.name}, du kannst hier deine bestehenden CSIs ändern!
  %h2 Klicke auf Reset um ein neue CSIs hochzuladen!

%div#formular

  %div#formnav
    = image_tag( 'bildzeichen.png')
    %p
      = link_to 'Your Recipe', wizard_path(:recipe), class:"current"
      = link_to 'About your country', wizard_path(:country_specific_information) 
      = link_to 'About you', wizard_path(:user)
      = link_to 'preview', wizard_path(:show_preview)


  - #Begin of formular

  = form_for @recipe do |f|
    = handle_error_messages(@recipe).html_safe if @recipe.errors.any?
    %div#left
      %div#information
        %h1
          %strong 1 
          What’s really 
          %span going on 
          here?

        %hr

        %p
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. 

        %h3
          = link_to "Fill in with fake data", "#", :onclick => "fill_in_recipe(); return false;"

        %div#title
          /= f.label :name, "Title"
          = f.text_field :name
        %div#portions
          = f.label :portion, "Portions"
          = f.text_field :portion
        %div#duration
          = f.label :duration, "Preparation time"
          = f.text_field :duration

      %div#ingredients
        %h1 
          %strong 2 
          Fill in tasty 
          %span ingredients 
          here!

        %hr  

        %p
          Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit attachment
        
        - if @recipe.ingredients_strings
          - @recipe.ingredients_strings.each do |ingredient_string|
            - next if ingredient_string[:quantity] == "" && ingredient_string[:ingredient] == ""
            %div.dynamicElement
              = text_field_tag "recipe[ingredients_strings][][quantity]", nil, :id => "recipe_ingredients_strings_quantity", :value => ingredient_string[:quantity]
              = text_field_tag "recipe[ingredients_strings][][ingredient]", nil, :id => "recipe_ingredients_strings_ingredient", :value => ingredient_string[:ingredient]
        - else
          %div.dynamicElement
            = text_field_tag "recipe[ingredients_strings][][quantity]", nil, :id => "recipe_ingredients_strings_quantity"
            = text_field_tag "recipe[ingredients_strings][][ingredient]", nil, :id => "recipe_ingredients_strings_ingredient"

    %div#right
      %div#preparation
        %h1
          %strong 3 
          Tell how to 
          %span prepare 
          meal!

        %hr

        %div
          = f.label :preparation, "Step"
          = f.text_area :preparation

        
        = f.fields_for :images do |image|
          = image.label :attachment, "Bild Upload"
          = image.file_field :attachment
          
      .hidden
        = f.hidden_field :longitude
        = f.hidden_field :latitude

      
      %div#buttons
        = f.submit "Save", :id => "save_recipe_button"

        = button_to "Reset", delete_cookie_upload_index_path, :method => :get, :confirm => "Do you want to upload another recipe?"

        = link_to "Skip this step", next_wizard_path


